# Cortex AI Platform - Infrastructure Architecture Diagram

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                EXTERNAL ACCESS                                      │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────────────────────────────────┐ │
│  │   Court     │    │  Internal   │    │              DMZ Zone                   │ │
│  │ Users/APIs  │    │   Users     │    │  ┌───────────────┐  ┌─────────────────┐ │ │
│  └─────────────┘    └─────────────┘    │  │   WAF/Proxy   │  │   API Gateway   │ │ │
│        │                   │           │  │  (nginx/F5)   │  │  (Kong/Istio)   │ │ │
│        └───────────────────┼───────────┼──┤               │  │                 │ │ │
│                            │           │  └───────────────┘  └─────────────────┘ │ │
└────────────────────────────┼───────────┼─────────────────────────────────────────┼─┘
                             │           │                                         │
┌────────────────────────────┼───────────┼─────────────────────────────────────────┼─┐
│                       NETWORK SECURITY LAYER                                     │ │
│  ┌─────────────────────────┼───────────┼─────────────────────────────────────────┼─┤
│  │        Firewall         │           │              Load Balancer              │ │
│  │     (pfSense/F5)        │           │           (MetalLB/HAProxy)             │ │
│  └─────────────────────────┼───────────┼─────────────────────────────────────────┼─┘
└────────────────────────────┼───────────┼─────────────────────────────────────────┼─┘
                             │           │                                         │
┌────────────────────────────┼───────────┼─────────────────────────────────────────┼─┐
│                         KUBERNETES CLUSTER                                       │ │
│  ┌─────────────────────────┼───────────┼─────────────────────────────────────────┼─┤
│  │                    INGRESS LAYER                                              │ │
│  │  ┌─────────────────┐              ┌─────────────────┐  ┌─────────────────────┐ │ │
│  │  │ Nginx Ingress   │              │  Istio Service  │  │   Certificate       │ │ │
│  │  │   Controller    │              │      Mesh       │  │    Manager          │ │ │
│  │  └─────────────────┘              └─────────────────┘  │   (cert-manager)    │ │ │
│  └─────────────────────────────────────────────────────────┤                   │ │ │
│                                                            └─────────────────────┘ │ │
│  ┌───────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                           CONTROL PLANE NODES                                │ │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                         │ │ │
│  │  │   Master 1  │  │   Master 2  │  │   Master 3  │   (HA etcd cluster)     │ │ │
│  │  │   (RHEL)    │  │   (RHEL)    │  │   (RHEL)    │                         │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘                         │ │ │
│  └───────────────────────────────────────────────────────────────────────────────┘ │ │
│                                                                                   │ │
│  ┌───────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                            WORKER NODES                                      │ │ │
│  │                                                                               │ │ │
│  │  ┌─────────────────────────┐        ┌──────────────────────────────────────┐ │ │ │
│  │  │     CPU WORKER NODES    │        │         GPU WORKER NODES             │ │ │ │
│  │  │                         │        │                                      │ │ │ │
│  │  │  ┌─────────────────────┐│        │ ┌─────────────────┐ ┌──────────────┐ │ │ │ │
│  │  │  │  Application Pods   ││        │ │  AI Inference   │ │ Model Store  │ │ │ │ │
│  │  │  │ - Document Agent    ││        │ │    Services     │ │   (MinIO)    │ │ │ │ │
│  │  │  │ - Court APIs        ││        │ │ - LLM Services  │ │              │ │ │ │ │
│  │  │  │ - Web Frontend      ││        │ │ - GPU Operators │ │              │ │ │ │ │
│  │  │  └─────────────────────┘│        │ └─────────────────┘ └──────────────┘ │ │ │ │
│  │  │                         │        │                                      │ │ │ │
│  │  │  ┌─────────────────────┐│        │ ┌─────────────────┐ ┌──────────────┐ │ │ │ │
│  │  │  │   Support Services  ││        │ │ NVIDIA Device   │ │  Triton      │ │ │ │ │
│  │  │  │ - Redis Cache       ││        │ │    Plugin       │ │ Inference    │ │ │ │ │
│  │  │  │ - Message Queue     ││        │ │ - GPU Scheduler │ │   Server     │ │ │ │ │
│  │  │  │ - Config Services   ││        │ │                 │ │              │ │ │ │ │
│  │  │  └─────────────────────┘│        │ └─────────────────┘ └──────────────┘ │ │ │ │
│  │  └─────────────────────────┘        └──────────────────────────────────────┘ │ │ │
│  └───────────────────────────────────────────────────────────────────────────────┘ │ │
│                                                                                   │ │
│  ┌───────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                        INFRASTRUCTURE SERVICES                               │ │ │
│  │                                                                               │ │ │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────┐ │ │ │
│  │  │   Monitoring    │ │    Logging      │ │    Security     │ │   Storage   │ │ │ │
│  │  │                 │ │                 │ │                 │ │             │ │ │ │
│  │  │ - Prometheus    │ │ - Elasticsearch │ │ - Vault         │ │ - Longhorn  │ │ │ │
│  │  │ - Grafana       │ │ - Fluentd       │ │ - OPA Gatekeeper│ │ - Ceph      │ │ │ │
│  │  │ - AlertManager  │ │ - Kibana        │ │ - Falco         │ │ - Local SSD │ │ │ │
│  │  │ - Jaeger        │ │ - Loki          │ │ - Cert Manager  │ │             │ │ │ │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────┘ │ │ │
│  └───────────────────────────────────────────────────────────────────────────────┘ │ │
│                                                                                   │ │
│  ┌───────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                         CI/CD PIPELINE NODES                                 │ │ │
│  │                                                                               │ │ │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────┐ │ │ │
│  │  │   GitLab/Gitea  │ │  Harbor Registry│ │   ArgoCD        │ │   Tekton    │ │ │ │
│  │  │                 │ │                 │ │                 │ │             │ │ │ │
│  │  │ - Source Control│ │ - Container Reg │ │ - GitOps Deploy │ │ - Pipelines │ │ │ │
│  │  │ - CI Runners    │ │ - Image Scan    │ │ - App Sync      │ │ - Build     │ │ │ │
│  │  │ - Security Scan │ │ - Vuln Assess   │ │ - Rollback      │ │ - Test      │ │ │ │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────┘ │ │ │
│  └───────────────────────────────────────────────────────────────────────────────┘ │ │
└───────────────────────────────────────────────────────────────────────────────────┘ │
                                                                                     │
┌─────────────────────────────────────────────────────────────────────────────────────┤
│                              PERSISTENT STORAGE                                   │
│                                                                                   │
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐   │
│ │  Model Storage  │ │  Document Store │ │   Log Archive   │ │    Backups      │   │
│ │                 │ │                 │ │                 │ │                 │   │
│ │ - NFS/Ceph      │ │ - PostgreSQL    │ │ - S3 Compatible │ │ - Velero        │   │
│ │ - Large Models  │ │ - Vector DB     │ │ - Long-term     │ │ - Snapshots     │   │
│ │ - Versioning    │ │ - Embeddings    │ │ - Compliance    │ │ - DR Ready      │   │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘

```

## Cloud Environment Sync Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            CLOUD ENVIRONMENT (AWS/Azure)                           │
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                          MANAGED KUBERNETES                                 │   │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐               │   │
│  │  │   EKS/AKS       │ │  GPU Node Pools │ │  Spot Instances │               │   │
│  │  │   Cluster       │ │  (P3/NC series) │ │  for Dev/Test   │               │   │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘               │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                        SYNC MECHANISMS                                      │   │
│  │                                                                             │   │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌───────────┐  │   │
│  │  │  GitOps Sync    │ │  Config Drift   │ │ Model Sync      │ │ Terraform │  │   │
│  │  │                 │ │   Detection     │ │                 │ │  Modules  │  │   │
│  │  │ - Fleet Manager │ │ - Crossplane    │ │ - Model Registry│ │ - IaC     │  │   │
│  │  │ - ArgoCD Apps   │ │ - Kustomize     │ │ - MLflow        │ │ - Parity  │  │   │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘ └───────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
```